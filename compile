emcc \
-sEXPORT_ES6 \
-sEXPORTED_FUNCTIONS=_malloc,_free \
-sALLOW_MEMORY_GROWTH \
-sALLOW_TABLE_GROWTH \
-sMAXIMUM_MEMORY=4gb \
-sENVIRONMENT=web,worker \
-sUSE_ZLIB=1 \
-sUSE_BZIP2=1 \
-Oz \
-std=c++20 \
-I/Users/tgross/Documents/GitHub/libarchive/dist/include \
-L/Users/tgross/Documents/GitHub/libarchive/dist/lib \
-larchive \
-lembind \
--emit-tsd extract.d.ts \
./src/js-driven-api.cpp \
--pre-js=./src/locateFile.js \
-o ./dist/extract.js &&
EMCC_DEBUG=1 &&
emcc \
--memoryprofiler \
-sASSERTIONS \
-sSAFE_HEAP \
-sSTACK_OVERFLOW_CHECK=1 \
-sEXPORT_ES6 \
-sEXPORTED_FUNCTIONS=_malloc,_free \
-sALLOW_MEMORY_GROWTH \
-sALLOW_TABLE_GROWTH \
-sMAXIMUM_MEMORY=4gb \
-sENVIRONMENT=web,worker \
-sUSE_ZLIB=1 \
-sUSE_BZIP2=1 \
-g \
-gsource-map \
-O0 \
-std=c++20 \
-I/Users/tgross/Documents/GitHub/libarchive/dist/include \
-L/Users/tgross/Documents/GitHub/libarchive/dist/lib \
-larchive \
-lembind \
./src/js-driven-api.cpp \
--pre-js=./src/locateFile.js \
-o ./dist/extract.debug.js &&
EMCC_DEBUG=1 &&
emcc \
-sASSERTIONS \
-sSAFE_HEAP \
-sSTACK_OVERFLOW_CHECK=1 \
-sEXPORT_ES6 \
-sEXPORTED_FUNCTIONS=_malloc,_free \
-sALLOW_MEMORY_GROWTH \
-sALLOW_TABLE_GROWTH \
-sMAXIMUM_MEMORY=4gb \
-sENVIRONMENT=node \
-sUSE_ZLIB=1 \
-sUSE_BZIP2=1 \
-g \
-gsource-map \
-O0 \
-std=c++20 \
-I/Users/tgross/Documents/GitHub/libarchive/dist/include \
-L/Users/tgross/Documents/GitHub/libarchive/dist/lib \
-larchive \
-lembind \
./src/js-driven-api.cpp \
--pre-js=./src/locateFile.js \
-o ./dist/extract.node.debug.js &&
emcc \
-sEXPORT_ES6 \
-sEXPORTED_FUNCTIONS=_malloc,_free \
-sALLOW_MEMORY_GROWTH \
-sALLOW_TABLE_GROWTH \
-sMAXIMUM_MEMORY=4gb \
-sENVIRONMENT=node \
-sUSE_ZLIB=1 \
-sUSE_BZIP2=1 \
-Oz \
-std=c++20 \
-I/Users/tgross/Documents/GitHub/libarchive/dist/include \
-L/Users/tgross/Documents/GitHub/libarchive/dist/lib \
-larchive \
-lembind \
./src/js-driven-api.cpp \
--pre-js=./src/locateFile.js \
-o ./dist/extract.node.js